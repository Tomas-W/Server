{% extends "admin/admin_base.html" %}

{% block admin_content %}
<div class="admin-wrapper">
    <div class="admin-content">

        {% if not current_user.email_verified %}
        <div class="verify-wrapper verify-gap">
            {% if flash_type == "verify" %}
                {% for message in get_flashed_messages() %}
                <div class="admin-flash admin-flash-gap">
                    <p>{{ message }}</p>
                </div>
                {% endfor %}
            {% endif %} 
            <div class="verify-content">
                <p class="verify-header">Verify your email before access</p>
                <p class="verify-info">If you used an invalid email address, you can change it here.</p>
            </div>

            <div class="verify-form-wrapper">
                <form method="POST" action="" novalidate class="verify-form">
                    {{ verify_email_form.hidden_tag() }}
                    <!-------- Email or username -------->
                    <div class="form-item last-form-item">
                        <div class="input-error-container">
                            {{ verify_email_form.email(class="admin-input-field", placeholder=current_user.email) }}
                            {% if verify_errors["email"] %}
                                <div class="admin-form-error"><strong>{{ verify_errors["email"][0] }}</strong></div>
                            {% endif %}
                            <div class="admin-form-label">{{ verify_email_form.email.label }}</div>
                        </div>
                    </div>
                    <!-------- Form type -------->
                    {{ verify_email_form.form_type }}
                    <!-------- Submit -------->
                    <div class="admin-devider"> 
                        {{ verify_email_form.submit(class="btn admin-btn") }}
                    </div>
                </form>
            </div>

        </div>
        {% endif %}

        <div class="admin-forms-wrapper {% if not current_user.email_verified %}blur{% endif %}">
            <div class="admin-forms-content">

                <div class="authentication-wrapper href-scroll admin-gap" id="authentication-wrapper">
                    {% if flash_type == "authentication" %}
                        {% for message in get_flashed_messages() %}
                        <div class="admin-flash admin-flash-gap">
                            <p>{{ message }}</p>
                        </div>
                        {% endfor %}
                    {% endif %} 
                    <p class="admin-header" >Authentication</p>
                    <div class="admin-form-wrapper">
                        <form method="POST" action="" novalidate class="admin-form">
                            {{ authentication_form.hidden_tag() }}
                            <!-------- Email or username -------->
                            <div class="form-item">
                                <div class="input-error-container">
                                    {{ authentication_form.username(class="admin-input-field", placeholder=" [ " ~ current_user.username ~ " ]") }}
                                    {% if authentication_errors["username"] %}
                                        <div class="admin-form-error"><strong>{{ authentication_errors["username"][0] }}</strong></div>
                                    {% endif %}
                                    <div class="admin-form-label">{{ authentication_form.username.label }}</div>
                                </div>
                            </div>

                            <div class="form-item">
                                <div class="input-error-container">
                                    {{ authentication_form.email(class="admin-input-field", placeholder=" [ " ~ current_user.email ~ " ]") }}
                                    {% if authentication_errors["email"] %}
                                        <div class="admin-form-error"><strong>{{ authentication_errors["email"][0] }}</strong></div>
                                    {% endif %}
                                    <div class="admin-form-label">{{ authentication_form.email.label }}</div>
                                </div>
                            </div>
                            
                            <div class="form-item">
                                <div class="input-error-container">
                                    {{ authentication_form.password(class="admin-input-field") }}
                                    {% if authentication_errors["password"] %}
                                        <div class="admin-form-error"><strong>{{ authentication_errors["password"][0] }}</strong></div>
                                    {% endif %}
                                    <div class="admin-form-label">{{ authentication_form.password.label }}</div>
                                </div>
                            </div>

                            <div class="form-item">
                                <div class="input-error-container">
                                    {{ authentication_form.confirm_password(class="admin-input-field") }}
                                    {% if authentication_errors["confirm_password"] %}
                                        <div class="admin-form-error"><strong>{{ authentication_errors["confirm_password"][0] }}</strong></div>
                                    {% endif %}
                                    <div class="admin-form-label">{{ authentication_form.confirm_password.label }}</div>
                                </div>
                            </div>

                            <div class="form-item">
                                <div class="input-error-container">
                                    {{ authentication_form.fast_name(class="admin-input-field", placeholder=" [ " ~ current_user.fast_name ~ " ]" if current_user.fast_name else "") }}
                                    {% if authentication_errors["fast_name"] %}
                                        <div class="admin-form-error"><strong>{{ authentication_errors["fast_name"][0] }}</strong></div>
                                        {% endif %}
                                    <div class="admin-form-label">{{ authentication_form.fast_name.label }}</div>
                                </div>
                            </div>

                            <div class="form-item last-form-item">
                                <div class="input-error-container">
                                    {{ authentication_form.fast_code(class="admin-input-field") }}
                                    {% if authentication_errors["fast_code"] %}
                                        <div class="admin-form-error"><strong>{{ authentication_errors["fast_code"][0] }}</strong></div>
                                    {% endif %}
                                    <div class="admin-form-label">{{ authentication_form.fast_code.label }}</div>
                                </div>
                            </div>

                            <!-------- Form type -------->
                            {{ authentication_form.form_type }}
                            <!-------- Submit -------->
                            <div class="admin-devider"> 
                                {{ authentication_form.submit(class="btn admin-btn", disabled=not current_user.email_verified) }}
                            </div>
                        </form>

                    </div>
                </div>

                <div class="profile-wrapper">
                    <p class="admin-header">Profile</p>
                </div>

                <div class="notifications-wrapper">
                    <p class="admin-header">Notifications</p>
                </div>

                <div class="settings-wrapper">
                    <p class="admin-header">Settings</p>
                </div>
                
            </div>
        </div>
        

    </div>
</div>
{% endblock %}